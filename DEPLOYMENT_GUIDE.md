# 文档管理系统 - 部署使用手册

> 为新手小白提供的完整部署和使用指南

**项目创建人：Mr.Tony**

## 📋 目录

- [前置准备](#前置准备)
- [环境安装](#环境安装)
- [项目部署](#项目部署)
- [首次使用](#首次使用)
- [日常使用](#日常使用)
- [维护管理](#维护管理)
- [故障排除](#故障排除)
- [安全建议](#安全建议)

## 🔧 前置准备

### 系统要求检查

在开始之前，请确认您的系统满足以下要求：

#### Windows系统
- Windows 10 或更高版本
- 至少4GB内存
- 至少5GB可用磁盘空间
- 管理员权限

#### macOS系统
- macOS 10.14 或更高版本
- 至少4GB内存
- 至少5GB可用磁盘空间

#### Linux系统
- Ubuntu 18.04+ / CentOS 7+ / Debian 9+
- 至少4GB内存
- 至少5GB可用磁盘空间
- sudo权限

### 网络要求
- 稳定的互联网连接（用于下载依赖包）
- 防火墙允许3001和5173端口（开发环境）

## 🛠 环境安装

### 步骤1：安装Node.js

#### Windows用户
1. 访问 [Node.js官网](https://nodejs.org/zh-cn/)
2. 点击"下载"按钮，选择LTS版本（推荐18.x）
3. 下载完成后，双击安装包
4. 按照安装向导完成安装（保持默认设置即可）
5. 打开命令提示符（Win+R，输入cmd），验证安装：
   ```cmd
   node --version
   npm --version
   ```

#### macOS用户
1. 访问 [Node.js官网](https://nodejs.org/zh-cn/)
2. 下载macOS安装包
3. 双击.pkg文件，按照提示安装
4. 打开终端，验证安装：
   ```bash
   node --version
   npm --version
   ```

#### Linux用户
```bash
# Ubuntu/Debian
curl -fsSL https://deb.nodesource.com/setup_18.x | sudo -E bash -
sudo apt-get install -y nodejs

# CentOS/RHEL
curl -fsSL https://rpm.nodesource.com/setup_18.x | sudo bash -
sudo yum install -y nodejs

# 验证安装
node --version
npm --version
```

### 步骤2：安装Git

#### Windows用户
1. 访问 [Git官网](https://git-scm.com/download/win)
2. 下载Git for Windows
3. 运行安装程序，保持默认设置
4. 安装完成后，右键桌面选择"Git Bash Here"验证

#### macOS用户
```bash
# 使用Homebrew安装（推荐）
/bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"
brew install git

# 或者从官网下载安装包
```

#### Linux用户
```bash
# Ubuntu/Debian
sudo apt update
sudo apt install git

# CentOS/RHEL
sudo yum install git
```

### 步骤3：安装代码编辑器（推荐）

推荐使用Visual Studio Code：
1. 访问 [VS Code官网](https://code.visualstudio.com/)
2. 下载适合您系统的版本
3. 安装完成后，安装推荐插件：
   - ES7+ React/Redux/React-Native snippets
   - Tailwind CSS IntelliSense
   - Prettier - Code formatter

## 🚀 项目部署

### 步骤1：获取项目代码

1. **创建项目目录**
   ```bash
   # Windows (在命令提示符中)
   mkdir C:\projects
   cd C:\projects
   
   # macOS/Linux
   mkdir ~/projects
   cd ~/projects
   ```

2. **克隆项目**（如果有Git仓库）
   ```bash
   git clone <项目仓库地址>
   cd document-management-system
   ```
   
   或者**下载项目压缩包**：
   - 下载项目zip文件
   - 解压到projects目录
   - 重命名文件夹为`document-management-system`

### 步骤2：安装项目依赖

1. **进入项目目录**
   ```bash
   cd document-management-system
   ```

2. **安装前端依赖**
   ```bash
   npm install
   ```
   
   如果安装速度慢，可以使用国内镜像：
   ```bash
   npm install --registry=https://registry.npmmirror.com
   ```

3. **安装后端依赖**
   ```bash
   cd server
   npm install
   cd ..
   ```

### 步骤3：配置项目

1. **检查后端配置**
   - 打开 `server/config/storage.js` 文件
   - 确认存储路径配置正确
   - 默认配置通常无需修改

2. **检查前端配置**
   - 打开 `src/lib/apiBase.ts` 文件
   - 确认API地址配置为 `http://localhost:3001/api`

### 步骤4：启动服务

1. **启动后端服务**
   ```bash
   cd server
   npm start
   ```
   
   看到以下信息表示启动成功：
   ```
   Server running on port 3001
   Storage directory: /path/to/storage
   ```

2. **启动前端服务**（新开一个终端/命令提示符窗口）
   ```bash
   # 确保在项目根目录
   npm run dev
   ```
   
   看到以下信息表示启动成功：
   ```
   Local:   http://localhost:5173/
   Network: http://192.168.x.x:5173/
   ```

### 步骤5：访问系统

1. 打开浏览器，访问：`http://localhost:5173`
2. 您应该能看到登录页面

## 👤 首次使用

### 管理员账户登录

系统默认创建了管理员账户：
- **用户名**：`admin`
- **密码**：`admin123`

**重要**：首次登录后请立即修改管理员密码！

### 修改管理员密码

1. 使用默认账户登录
2. 点击右上角头像，选择"个人设置"
3. 在"安全设置"中修改密码
4. 输入当前密码和新密码
5. 点击"保存"完成修改

### 创建普通用户

1. 点击右上角"注册"按钮
2. 填写用户信息：
   - 用户名：3-20个字符，只能包含字母、数字、下划线
   - 邮箱：有效的邮箱地址
   - 密码：至少6个字符
   - 全名：用户的真实姓名
3. 点击"注册"完成

### 系统初始化

1. **创建基础文件夹结构**
   - 登录后进入"文件夹管理"
   - 创建常用文件夹，如：
     - 公司文档
     - 项目资料
     - 个人文件
     - 临时文件

2. **配置系统设置**
   - 进入"系统设置"
   - 设置文件上传限制
   - 配置存储路径
   - 设置系统参数

## 📚 日常使用

### 文档上传

1. **进入目标文件夹**
   - 在文件夹页面点击要上传到的文件夹

2. **上传文件**
   - 点击"上传文档"按钮
   - 选择文件（支持拖拽上传）
   - 填写文档信息：
     - 标题：文档的显示名称
     - 描述：文档的详细说明
     - 标签：用逗号分隔的关键词
   - 点击"上传"

3. **支持的文件格式**
   - 文档：PDF, DOC, DOCX, TXT, MD
   - 图片：JPG, PNG, GIF, WebP
   - 视频：MP4, AVI, MOV
   - 音频：MP3, WAV
   - 压缩包：ZIP, RAR
   - 其他：Excel, PowerPoint等

### 文档管理

1. **查看文档**
   - 点击文档名称进入预览页面
   - 支持在线预览多种格式

2. **下载文档**
   - 在文档列表中点击下载按钮
   - 或在预览页面点击下载

3. **移动文档**
   - 选择文档，点击"移动"按钮
   - 选择目标文件夹
   - 确认移动

4. **编辑文档信息**
   - 点击文档的编辑按钮
   - 修改标题、描述、标签
   - 保存更改

5. **删除文档**
   - 选择要删除的文档
   - 点击删除按钮
   - 确认删除（文档会移至回收站）

### 文件夹管理

1. **创建文件夹**
   - 在文件夹页面点击"新建文件夹"
   - 填写文件夹名称和描述
   - 选择可见性（公开/私有）
   - 点击"创建"

2. **编辑文件夹**
   - 点击文件夹的编辑按钮
   - 修改名称、描述
   - 保存更改

3. **设置文件夹权限**
   - 点击文件夹的设置按钮
   - 选择可见性：
     - 公开：所有用户可见
     - 私有：仅自己可见
   - 保存设置

### 搜索功能

1. **全局搜索**
   - 在顶部搜索框输入关键词
   - 按回车键或点击搜索按钮
   - 查看搜索结果

2. **高级搜索**
   - 点击搜索框旁的"高级搜索"
   - 设置筛选条件：
     - 文件类型
     - 日期范围
     - 文件大小
     - 特定文件夹
   - 点击"搜索"

### 用户管理（管理员功能）

1. **查看用户列表**
   - 进入"用户管理"页面
   - 查看所有注册用户

2. **编辑用户信息**
   - 点击用户的编辑按钮
   - 修改用户信息
   - 保存更改

3. **重置用户密码**
   - 选择用户，点击"重置密码"
   - 系统生成新密码
   - 通知用户新密码

4. **禁用/启用用户**
   - 点击用户状态切换按钮
   - 确认操作

## 🔧 维护管理

### 日常维护

1. **检查系统状态**
   - 定期查看系统设置页面
   - 检查存储空间使用情况
   - 查看系统日志

2. **清理临时文件**
   - 定期清理上传临时文件
   - 删除不需要的日志文件
   - 清空回收站

3. **备份数据**
   - 定期备份用户数据
   - 备份系统配置文件
   - 备份上传的文件

### 性能优化

1. **监控资源使用**
   - 使用任务管理器监控CPU和内存使用
   - 检查磁盘空间
   - 监控网络流量

2. **优化建议**
   - 定期重启服务
   - 清理不必要的文件
   - 升级Node.js版本
   - 考虑使用SSD硬盘

### 数据备份

1. **手动备份**
   ```bash
   # 停止服务
   # Windows
   Ctrl+C (在运行服务的命令窗口)
   
   # 备份数据目录
   cp -r server/data server/data_backup_$(date +%Y%m%d)
   
   # 备份配置文件
   cp server/config/storage.js server/config/storage.js.backup
   ```

2. **自动备份脚本**
   创建备份脚本 `backup.sh`：
   ```bash
   #!/bin/bash
   DATE=$(date +%Y%m%d_%H%M%S)
   BACKUP_DIR="backups/backup_$DATE"
   
   mkdir -p $BACKUP_DIR
   cp -r server/data $BACKUP_DIR/
   cp -r server/config $BACKUP_DIR/
   
   echo "备份完成: $BACKUP_DIR"
   ```

## 🚨 故障排除

### 常见问题及解决方案

#### 1. 服务启动失败

**问题**：运行 `npm start` 时出错
**解决方案**：
```bash
# 检查端口是否被占用
netstat -ano | findstr :3001

# 如果端口被占用，结束进程或修改端口
# 修改 server/app.js 中的端口号

# 检查Node.js版本
node --version

# 重新安装依赖
rm -rf node_modules
npm install
```

#### 2. 文件上传失败

**问题**：上传文件时出现错误
**解决方案**：
1. 检查文件大小是否超过限制
2. 检查存储目录权限
3. 检查磁盘空间
4. 查看浏览器控制台错误信息

#### 3. 文件预览不显示

**问题**：点击文件无法预览
**解决方案**：
1. 检查文件格式是否支持
2. 清除浏览器缓存
3. 检查文件是否损坏
4. 尝试重新上传文件

#### 4. 登录问题

**问题**：无法登录系统
**解决方案**：
1. 检查用户名和密码
2. 清除浏览器缓存和Cookie
3. 检查网络连接
4. 重置用户密码

#### 5. 数据丢失

**问题**：文件或数据丢失
**解决方案**：
1. 检查回收站
2. 从备份恢复数据
3. 检查存储目录
4. 查看系统日志

### 日志查看

1. **浏览器控制台**
   - 按F12打开开发者工具
   - 查看Console标签页的错误信息

2. **服务器日志**
   - 查看运行服务的终端输出
   - 检查 `server/logs/` 目录下的日志文件

3. **系统日志**
   - 在系统设置中查看操作日志
   - 分析用户活动记录

### 重置系统

如果系统出现严重问题，可以重置：

1. **重置用户数据**
   ```bash
   cd server
   rm -rf data/users.json
   npm start
   ```

2. **重置所有数据**
   ```bash
   cd server
   rm -rf data/
   npm start
   ```

3. **重置配置**
   ```bash
   cd server/config
   rm storage-config.json
   cd ..
   npm start
   ```

## 🔒 安全建议

### 基础安全

1. **修改默认密码**
   - 立即修改管理员默认密码
   - 使用强密码（至少8位，包含大小写字母、数字、特殊字符）

2. **定期更新密码**
   - 建议每3个月更换一次密码
   - 不要重复使用旧密码

3. **用户权限管理**
   - 定期审查用户权限
   - 及时删除不活跃用户
   - 限制管理员账户数量

### 网络安全

1. **防火墙设置**
   - 只开放必要的端口
   - 限制访问来源IP
   - 使用HTTPS（生产环境）

2. **访问控制**
   - 设置IP白名单
   - 限制登录尝试次数
   - 启用会话超时

### 数据安全

1. **定期备份**
   - 每日备份重要数据
   - 异地存储备份文件
   - 定期测试备份恢复

2. **文件安全**
   - 定期扫描上传文件
   - 限制文件类型
   - 设置文件大小限制

### 监控告警

1. **系统监控**
   - 监控磁盘使用率
   - 监控内存和CPU使用
   - 监控网络流量

2. **异常告警**
   - 设置登录失败告警
   - 设置存储空间告警
   - 设置系统错误告警

## 📞 技术支持

### 获取帮助

1. **查看文档**
   - 阅读README.md文件
   - 查看本部署指南
   - 参考API文档

2. **社区支持**
   - 查看GitHub Issues
   - 参与社区讨论
   - 提交问题反馈

3. **联系方式**
   - 项目创建人：Mr.Tony
   - 邮箱：[联系邮箱]
   - GitHub：[项目地址]

### 问题反馈

提交问题时请包含：
1. 操作系统版本
2. Node.js版本
3. 浏览器版本
4. 错误信息截图
5. 操作步骤描述

## 📋 检查清单

### 部署前检查
- [ ] Node.js版本 >= 16.0
- [ ] 磁盘空间 >= 5GB
- [ ] 网络连接正常
- [ ] 防火墙端口开放

### 部署后检查
- [ ] 前端服务正常启动
- [ ] 后端服务正常启动
- [ ] 可以正常访问登录页面
- [ ] 管理员账户可以登录
- [ ] 文件上传功能正常
- [ ] 文件预览功能正常

### 安全检查
- [ ] 修改默认管理员密码
- [ ] 设置强密码策略
- [ ] 配置用户权限
- [ ] 设置数据备份
- [ ] 检查系统日志

## 🎯 最佳实践

### 部署建议
1. 使用专用服务器或VPS
2. 配置域名和SSL证书
3. 使用反向代理（Nginx）
4. 配置进程管理器（PM2）
5. 设置自动备份脚本

### 使用建议
1. 定期清理不需要的文件
2. 合理组织文件夹结构
3. 使用有意义的文件名
4. 添加详细的文档描述
5. 定期备份重要数据

### 维护建议
1. 定期更新系统依赖
2. 监控系统性能
3. 定期检查日志
4. 及时处理用户反馈
5. 保持系统文档更新

---

**祝您使用愉快！如有问题，请随时联系技术支持。**

*本文档由 Mr.Tony 创建，最后更新时间：2024年1月*
